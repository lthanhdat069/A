-- üåå DATDZ HUB üíß | Fixed Menu Visible
repeat task.wait() until game:IsLoaded()

local CoreGui = game:GetService("CoreGui")
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local StarterGui = game:GetService("StarterGui")

-- Intro DatDz + √¢m thanh
local intro = Instance.new("ScreenGui", CoreGui)
local text = Instance.new("TextLabel", intro)
text.Size = UDim2.new(1,0,1,0)
text.BackgroundTransparency = 1
text.Text = "Dat Dz üíß RPG Hub"
text.Font = Enum.Font.FredokaOne
text.TextScaled = true
text.TextColor3 = Color3.fromRGB(0,255,255)
text.TextTransparency = 1

local sound = Instance.new("Sound", intro)
sound.SoundId = "rbxassetid://9120780434"
sound.Volume = 1
sound:Play()

TweenService:Create(text, TweenInfo.new(1), {TextTransparency = 0}):Play()
task.wait(2)
TweenService:Create(text, TweenInfo.new(1), {TextTransparency = 1}):Play()
task.wait(1)
intro:Destroy()

-- Watermark g√≥c ph·∫£i
local wm = Instance.new("ScreenGui", CoreGui)
local label = Instance.new("TextLabel", wm)
label.AnchorPoint = Vector2.new(1,0)
label.Position = UDim2.new(1,-10,0,10)
label.Size = UDim2.new(0,180,0,40)
label.BackgroundTransparency = 1
label.Text = "Dat Dz üíß\nRPG Script Hub"
label.TextColor3 = Color3.fromRGB(0,255,255)
label.Font = Enum.Font.FredokaOne
label.TextSize = 14
label.TextXAlignment = Enum.TextXAlignment.Right
label.TextYAlignment = Enum.TextYAlignment.Top

-- N√∫t m·ªü menu
local btnGui = Instance.new("ScreenGui", CoreGui)
local openBtn = Instance.new("ImageButton", btnGui)
openBtn.BackgroundColor3 = Color3.fromRGB(15,15,15)
openBtn.Position = UDim2.new(0.05,0,0.15,0)
openBtn.Size = UDim2.new(0,45,0,45)
openBtn.Draggable = true
openBtn.Image = "rbxassetid://103173399598412"
local corner = Instance.new("UICorner", openBtn)
corner.CornerRadius = UDim.new(1,10)

local clickSnd = Instance.new("Sound", btnGui)
clickSnd.SoundId = "rbxassetid://9118822952"
clickSnd.Volume = 1

-- üß© Load Fluent UI (ƒë·∫£m b·∫£o load tr∆∞·ªõc)
local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()
repeat task.wait() until Fluent and typeof(Fluent.CreateWindow) == "function"

-- T·∫°o window
local Window = Fluent:CreateWindow({
	Title = "DatDz HUB üíß",
	SubTitle = "RPG & Script Hub",
	TabWidth = 150,
	Size = UDim2.fromOffset(520, 340),
	Acrylic = true,
	Theme = "Aqua",
	MinimizeKey = Enum.KeyCode.End
})

-- Th√™m tab
local Tabs = {
	Executor = Window:AddTab({ Title = "Nh·∫≠p Script üß©" }),
	Scripts = Window:AddTab({ Title = "Script Ph·ªï Bi·∫øn ‚öôÔ∏è" })
}

-- üß† EXECUTOR TAB
local savedScript = nil
local box = Tabs.Executor:AddTextbox("üí¨ D√°n Script", "Nh·∫≠p code...", function() end)

Tabs.Executor:AddButton({
	Title = "‚ñ∂Ô∏è Ch·∫°y Script",
	Callback = function()
		local txt = box.Value
		if txt ~= "" then
			pcall(function() loadstring(txt)() end)
			savedScript = txt
			StarterGui:SetCore("SendNotification", {Title="‚úÖ Th√†nh c√¥ng", Text="ƒê√£ ch·∫°y script", Duration=3})
		end
	end
})

Tabs.Executor:AddButton({
	Title = "üíæ L∆∞u Script",
	Callback = function()
		if writefile and savedScript then
			writefile("DatDz_Last.txt", savedScript)
			StarterGui:SetCore("SendNotification", {Title="üíæ ƒê√£ l∆∞u", Text="ƒê√£ l∆∞u script g·∫ßn ƒë√¢y", Duration=3})
		end
	end
})

Tabs.Executor:AddButton({
	Title = "üìÇ M·ªü Script G·∫ßn ƒê√¢y",
	Callback = function()
		if isfile and isfile("DatDz_Last.txt") then
			box:SetValue(readfile("DatDz_Last.txt"))
		end
	end
})

Tabs.Executor:AddButton({
	Title = "üóëÔ∏è Xo√° Script",
	Callback = function()
		if delfile and isfile("DatDz_Last.txt") then
			delfile("DatDz_Last.txt")
			StarterGui:SetCore("SendNotification", {Title="üóëÔ∏è ƒê√£ xo√°", Text="Xo√° th√†nh c√¥ng", Duration=3})
		end
	end
})

-- ‚öôÔ∏è SCRIPT TAB
Tabs.Scripts:AddButton({
	Title = "Fly V3 ‚úàÔ∏è",
	Callback = function()
		loadstring(game:HttpGet("https://raw.githubusercontent.com/XNEOFF/FlyGuiV3/main/FlyGuiV3.txt"))()
	end
})

Tabs.Scripts:AddButton({
	Title = "Infinite Yield üß†",
	Callback = function()
		loadstring(game:HttpGet("https://rawscripts.net/raw/Universal-Script-Infinite-Yield-43437"))()
	end
})

Tabs.Scripts:AddButton({
	Title = "Invisible (T√†ng h√¨nh)",
	Callback = function()
		loadstring(game:HttpGet("https://rawscripts.net/raw/Universal-Script-Awesome-Invisible-man-21074"))()
	end
})

-- ESP n·ªôi b·ªô (c·ª±c nh·∫π)
local espOn = false
local espFolder = Instance.new("Folder", CoreGui)
espFolder.Name = "DatDzESP"

local function toggleESP(state)
	espOn = state
	for _, gui in ipairs(espFolder:GetChildren()) do gui:Destroy() end
	if not state then return end

	for _, pl in ipairs(Players:GetPlayers()) do
		if pl ~= Players.LocalPlayer and pl.Character and pl.Character:FindFirstChild("Head") then
			local head = pl.Character.Head
			local bill = Instance.new("BillboardGui", espFolder)
			bill.Adornee = head
			bill.Size = UDim2.new(0,120,0,40)
			bill.AlwaysOnTop = true
			local txt = Instance.new("TextLabel", bill)
			txt.Size = UDim2.new(1,0,1,0)
			txt.BackgroundTransparency = 1
			txt.Text = pl.Name
			txt.TextColor3 = Color3.fromRGB(0,255,255)
			txt.Font = Enum.Font.GothamBold
			txt.TextSize = 14
		end
	end
end

Tabs.Scripts:AddToggle({
	Title = "ESP (Hi·ªán t√™n ng∆∞·ªùi ch∆°i)",
	Callback = toggleESP
})

-- Hi·ªáu ·ª©ng m·ªü menu
openBtn.MouseButton1Click:Connect(function()
	clickSnd:Play()
	local f = CoreGui:FindFirstChild("Fluent")
	if f then f.Enabled = not f.Enabled end
end)